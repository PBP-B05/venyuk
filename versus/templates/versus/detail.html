{% extends "base.html" %}
{% load static humanize %}

{% block content %}
<div class="w-full h-[200px] bg-cover bg-center"
     style="background-image:url({% static 'images/hero_versus.jpg' %});">
  <div class="w-full h-full bg-black/20"></div>
</div>

<div class="mx-auto max-w-5xl px-4 sm:px-6 lg:px-8 -mt-16 relative">
  <div class="bg-white rounded-2xl shadow p-6">
    <div class="flex items-start justify-between gap-4">
      <div>
        <p class="text-sm text-gray-500">
          {{ ch.get_sport_display|default:"Olahraga" }}
          {% if ch.match_category %} • {{ ch.get_match_category_display }}{% endif %}
        </p>
        <h1 class="text-2xl font-semibold leading-snug">
          {{ ch.title|default:"Matchup" }}
        </h1>
        {% if ch.host %}
          <p class="text-sm text-gray-500 mt-1">Host: {{ ch.host.name }}</p>
        {% endif %}
      </div>

      {% if ch.status %}
        <span class="inline-flex items-center rounded-full bg-gray-100 text-gray-700 text-xs font-medium px-3 py-1">
          {{ ch.get_status_display|default:ch.status }}
        </span>
      {% endif %}
    </div>

    {% if ch.banner_url %}
      <div class="mt-5">
        <img src="{{ ch.banner_url }}" alt="Poster" class="w-full rounded-xl border object-cover max-h-[400px]">
      </div>
    {% endif %}

    <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-6 text-sm text-gray-800">
      <div class="space-y-3">
        <div class="flex items-center gap-2">
          <span>🗓️</span>
          <span>{{ ch.start_at|date:"j F Y • H:i" }}</span>
        </div>

        {% if ch.venue_name %}
        <div class="flex items-center gap-2">
          <span>📍</span>
          <span>{{ ch.venue_name }}</span>
        </div>
        {% endif %}

        <div class="flex items-center gap-2">
          <span>💲</span>
          {% if ch.cost_per_person %}
            <span>Rp {{ ch.cost_per_person|intcomma }} / orang</span>
          {% else %}
            <span>Gratis</span>
          {% endif %}
        </div>

        {% if ch.prize_pool %}
        <div class="flex items-center gap-2">
          <span>🏆</span>
          <span>Prize Pool: Rp {{ ch.prize_pool|intcomma }}</span>
        </div>
        {% endif %}

        <div class="flex items-center gap-2">
          <span>👥</span>
          <span>{{ ch.players_joined }}/{{ ch.max_players }} pemain</span>
        </div>
      </div>

      <div>
        <h3 class="font-semibold mb-2">Deskripsi</h3>
        {% if ch.description %}
          <p class="text-gray-700 whitespace-pre-line">{{ ch.description }}</p>
        {% else %}
          <p class="text-gray-400">Belum ada deskripsi.</p>
        {% endif %}
      </div>
    </div>

    <div class="mt-6 flex items-center justify-between">
      <a href="{% url 'versus:list' %}" class="text-sm hover:opacity-80" style="color:#D84040">← Kembali</a>

      {% if ch.status|lower == "open" %}
        <form method="post" action="{% url 'versus:join' ch.pk %}">
          {% csrf_token %}
          <button type="submit"
                  onclick="return confirm('Yakin mau join matchup ini?');"
                  class="rounded-full text-white px-5 py-2 text-sm hover:opacity-90 transition"
                  style="background-color:#D84040">
            Join
          </button>
        </form>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}


